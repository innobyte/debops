---

- name: Clone the telegraf upstream repository
  git:
    repo: '{{ telegraf__upstream_repo }}'
    dest: '{{ telegraf__upstream_dest }}'
    version: '{{ telegraf__upstream_version }}'
    verify_commit: True

- name: Symlink the upstream telegraf binary in $PATH
  file:
    dest: '{{ telegraf__upstream_link }}'
    src: '{{ telegraf__upstream_dest + "/yadm" }}'
    state: 'link'
